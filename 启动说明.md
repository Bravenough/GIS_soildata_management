# åŸºäºGISçš„åœŸå£¤æ•°æ®è¯„ä¼°åŠåˆ†æä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ - å¯åŠ¨è¯´æ˜

## ğŸŒŸ ç³»ç»Ÿæ¦‚è¿°
æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºGISçš„åœŸå£¤æ•°æ®è¯„ä¼°åŠåˆ†æä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿï¼Œé‡‡ç”¨uni-appå‰ç«¯ + Expressåç«¯ + MySQLæ•°æ®åº“çš„æ¶æ„ã€‚
- **æ•°æ®è§„æ¨¡**: 10,000ä¸ªåœŸå£¤æ ·æœ¬ï¼Œè¦†ç›–31ä¸ªçœä»½
- **åŠŸèƒ½**: åœŸå£¤æ•°æ®æŸ¥è¯¢ã€åˆ†æã€å¯è§†åŒ–å’Œè¯„ä¼°

## ğŸ“‹ ç¯å¢ƒè¦æ±‚
- Node.js >= 14.0.0
- MySQL >= 5.7
- npm >= 6.0.0
- HBuilderX (å¯é€‰ï¼Œç”¨äºuni-appå¼€å‘)

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®
ç³»ç»Ÿä½¿ç”¨MySQLæ•°æ®åº“ï¼Œé…ç½®ä¿¡æ¯åœ¨ `utils/database.js` æ–‡ä»¶ä¸­ï¼š
- **ä¸»æœº**: localhost
- **ç«¯å£**: 3306
- **ç”¨æˆ·å**: root
- **å¯†ç **: 050316
- **æ•°æ®åº“**: soil_data

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•1ï¼šå®Œæ•´å¯åŠ¨ (æ¨è)

#### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

#### 2. å¯åŠ¨åç«¯æœåŠ¡
```bash
npm start
# æˆ–è€…å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev
```

#### 3. å¯åŠ¨å‰ç«¯æœåŠ¡

**å¦‚æœé‡åˆ° "uni-serve" å‘½ä»¤ä¸å­˜åœ¨é”™è¯¯ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š**

**æ–¹æ¡ˆA: ä½¿ç”¨HBuilderX (æ¨è)**
1. æ‰“å¼€HBuilderX
2. æ–‡ä»¶ â†’ æ‰“å¼€ç›®å½• â†’ é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹
3. å³é”®é¡¹ç›®æ ¹ç›®å½• â†’ è¿è¡Œ â†’ è¿è¡Œåˆ°æµè§ˆå™¨ â†’ Chrome

**æ–¹æ¡ˆB: å®‰è£…uni-app CLI**
```bash
npm install -g @dcloudio/cli
npm run dev:h5
```

**æ–¹æ¡ˆC: ä½¿ç”¨å¯åŠ¨è„šæœ¬**
```bash
start-frontend.bat
```

**æ–¹æ¡ˆD: ç›´æ¥ä½¿ç”¨æµ‹è¯•é¡µé¢**
è®¿é—®: http://localhost:8081/test.html

#### 4. è®¿é—®ç³»ç»Ÿ
- **APIæµ‹è¯•é¡µé¢**: http://localhost:8081/test.html â­ **æ¨èå…ˆè®¿é—®**
- **å®Œæ•´å‰ç«¯**: http://localhost:8081/index.html
- **åç«¯API**: http://localhost:3000

### æ–¹æ³•2ï¼šHBuilderXå¯åŠ¨

1. **æ‰“å¼€HBuilderX**
2. **æ–‡ä»¶ â†’ æ‰“å¼€ç›®å½•** â†’ é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹
3. **å³é”®é¡¹ç›®æ ¹ç›®å½•** â†’ **è¿è¡Œ â†’ è¿è¡Œåˆ°æµè§ˆå™¨ â†’ Chrome**

### æ–¹æ³•3ï¼šä»…åç«¯æµ‹è¯•

```bash
# å¯åŠ¨åç«¯
npm start

# æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run test-db

# è®¿é—®APIæµ‹è¯•é¡µé¢
# http://localhost:8080/test.html
```

## ğŸ”§ æµ‹è¯•éªŒè¯

### 1. æ•°æ®åº“è¿æ¥æµ‹è¯•
```bash
npm run test-db
```
**é¢„æœŸè¾“å‡º**:
```
âœ… ç»Ÿè®¡æ¦‚å†µæ•°æ®: { totalSamples: 10000, provincesCovered: 31, averagePh: 6.76 }
âœ… åœŸå£¤æ ·æœ¬æ•°æ®: å…±1000æ¡è®°å½•
ğŸ‰ æ‰€æœ‰æ•°æ®åº“æµ‹è¯•é€šè¿‡ï¼
```

### 2. APIæ¥å£æµ‹è¯•
è®¿é—®: http://localhost:8080/test.html
- è‡ªåŠ¨æµ‹è¯•ç»Ÿè®¡æ¦‚å†µæ¥å£
- æ‰‹åŠ¨æµ‹è¯•å„ä¸ªAPIåŠŸèƒ½
- å®æ—¶æ˜¾ç¤ºæ•°æ®åº“æ•°æ®

## ğŸŒ æœåŠ¡åœ°å€
| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **APIæµ‹è¯•é¡µé¢** | http://localhost:8081/test.html | æ¨èé¦–å…ˆè®¿é—® |
| **å®Œæ•´å‰ç«¯** | http://localhost:8081/index.html | uni-appå®Œæ•´ç•Œé¢ |
| **åç«¯API** | http://localhost:3000 | RESTful APIæœåŠ¡ |
| **å¥åº·æ£€æŸ¥** | http://localhost:3000/api/health | æœåŠ¡çŠ¶æ€æ£€æŸ¥ |

## ğŸ“¡ APIæ¥å£åˆ—è¡¨
| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/statistics-overview` | GET | è·å–ç»Ÿè®¡æ¦‚å†µ |
| `/api/soil-samples` | GET | è·å–åœŸå£¤æ ·æœ¬æ•°æ® |
| `/api/soil-data-table` | GET | è·å–åœŸå£¤æ•°æ®è¡¨æ ¼ |
| `/api/region-nutrient-stats` | GET | è·å–åŒºåŸŸå…»åˆ†ç»Ÿè®¡ |
| `/api/ph-distribution-stats` | GET | è·å–pHåˆ†å¸ƒç»Ÿè®¡ |
| `/api/soil-texture-stats` | GET | è·å–åœŸå£¤è´¨åœ°ç»Ÿè®¡ |
| `/api/nutrient-trend-data` | GET | è·å–å…»åˆ†è¶‹åŠ¿æ•°æ® |
| `/api/soil-quality-assessment/:id` | GET | è·å–åœŸå£¤è´¨é‡è¯„ä¼° |
| `/api/historical-data/:stationId` | GET | è·å–å†å²ç›‘æµ‹æ•°æ® |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ |

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹å ç”¨è¿›ç¨‹
netstat -ano | findstr :3000
# ç»ˆæ­¢è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- éªŒè¯æ•°æ®åº“é…ç½® (`utils/database.js`)
- ç¡®è®¤æ•°æ®åº“ `soil_data` å­˜åœ¨

#### 3. HBuilderXè¿è¡Œé”™è¯¯
- ç¡®ä¿å®‰è£…äº†uni-appæ’ä»¶
- é‡å¯HBuilderX
- ä½¿ç”¨ **æ–‡ä»¶ â†’ æ‰“å¼€ç›®å½•** è€Œä¸æ˜¯å¯¼å…¥

#### 4. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force
# é‡æ–°å®‰è£…
npm install
```

#### 5. å‰ç«¯é¡µé¢ç©ºç™½
- è®¿é—® http://localhost:8081/test.html éªŒè¯åç«¯
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç¡®è®¤ä¸¤ä¸ªæœåŠ¡éƒ½å·²å¯åŠ¨

#### 6. "uni-serve" å‘½ä»¤ä¸å­˜åœ¨
è¿™æ˜¯uni-appé¡¹ç›®çš„å¸¸è§é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆï¼š
- **æ¨è**: ä½¿ç”¨HBuilderXå›¾å½¢ç•Œé¢è¿è¡Œé¡¹ç›®
- **å¤‡é€‰**: å®‰è£… `npm install -g @dcloudio/cli`
- **ä¸´æ—¶**: ç›´æ¥ä½¿ç”¨ http://localhost:8081/test.html æµ‹è¯•åŠŸèƒ½
- **è„šæœ¬**: è¿è¡Œ `start-frontend.bat` é€‰æ‹©å¯åŠ¨æ–¹å¼

## ğŸ“ é¡¹ç›®ç»“æ„
```
â”œâ”€â”€ server.js              # åç«¯æœåŠ¡å…¥å£
â”œâ”€â”€ utils/database.js       # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ test-db.js             # æ•°æ®åº“æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test.html              # APIæµ‹è¯•é¡µé¢
â”œâ”€â”€ index.html             # å‰ç«¯å…¥å£
â”œâ”€â”€ pages/                 # uni-appé¡µé¢
â”œâ”€â”€ static/                # é™æ€èµ„æº
â””â”€â”€ data/                  # æ•°æ®æ–‡ä»¶
```

## ğŸ” å¼€å‘è°ƒè¯•
- **åç«¯æ—¥å¿—**: æ§åˆ¶å°è¾“å‡ºAPIè¯·æ±‚å’Œæ•°æ®åº“æ“ä½œ
- **å‰ç«¯è°ƒè¯•**: æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- **APIæµ‹è¯•**: ä½¿ç”¨test.htmlé¡µé¢æˆ–Postman
- **æ•°æ®åº“**: ä½¿ç”¨Navicatæˆ–MySQL Workbench

## ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
1. **åç«¯æœåŠ¡**: è®¿é—® http://localhost:3000/api/health
2. **æ•°æ®åº“è¿æ¥**: è¿è¡Œ `npm run test-db`
3. **å‰ç«¯æœåŠ¡**: è®¿é—® http://localhost:8081/test.html
4. **å®Œæ•´åŠŸèƒ½**: è®¿é—® http://localhost:8081/index.html

## ğŸ¯ æ¨èå¯åŠ¨æµç¨‹
1. **å¯åŠ¨åç«¯**: `npm start`
2. **å¯åŠ¨å‰ç«¯**: `npm run dev:h5`
3. **éªŒè¯ç³»ç»Ÿ**: è®¿é—® http://localhost:8081/test.html
4. **ä½¿ç”¨ç³»ç»Ÿ**: è®¿é—® http://localhost:8081/index.html

---
**æ³¨æ„**: å»ºè®®é¦–å…ˆè®¿é—® http://localhost:8081/test.html éªŒè¯ç³»ç»ŸåŠŸèƒ½æ­£å¸¸ï¼Œå†ä½¿ç”¨å®Œæ•´çš„uni-appç•Œé¢ã€‚ 